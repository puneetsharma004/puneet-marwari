version: '3.9'
services:
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: mawari-frontend
    restart: always
    # IMPORTANT: On Coolify, do not expose ports manually (e.g., 3000:3000)
    # Coolify uses its own proxy to route traffic to your service.
    environment:
      - NODE_ENV=production
      - NEXT_PUBLIC_API_BASE_URL=${NEXT_PUBLIC_API_BASE_URL}
    # Coolify will inject these variables if they are set in the UI
    networks:
      - coolify

networks:
  coolify:
    external: true